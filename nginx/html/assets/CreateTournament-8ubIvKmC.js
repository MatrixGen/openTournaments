import{r as s,j as e,aG as J,aP as de,av as oe,f as h,aB as ce,u as Z,aQ as me,aR as xe,l as U,B as V,a as ue,ax as ge,t as O,aO as he}from"./index-Dd7dhgAO.js";import{d as W}from"./dataService-CChVBLgp.js";import{F as pe}from"./PlusIcon-BZ1xpnUY.js";import{F as be}from"./CheckIcon-FxAnfe32.js";import{F as ye}from"./UsersIcon-DavD6FVP.js";import{F as fe}from"./ClockIcon-DpHVzJ4M.js";import{F as je}from"./CurrencyDollarIcon-DqON1HzM.js";import{F as H}from"./TrophyIcon-E9_GOpX6.js";import{t as ke}from"./tournamentSchema-B99HYTYl.js";function Ne({title:r,titleId:t,...i},u){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":t},i),r?s.createElement("title",{id:t},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const ve=s.forwardRef(Ne);function we({title:r,titleId:t,...i},u){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":t},i),r?s.createElement("title",{id:t},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const _e=s.forwardRef(we);function ze({title:r,titleId:t,...i},u){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":t},i),r?s.createElement("title",{id:t},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Se=s.forwardRef(ze);function Pe({title:r,titleId:t,...i},u){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":t},i),r?s.createElement("title",{id:t},r):null,s.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const q=s.forwardRef(Pe),M=[{id:"basic",title:"Basic",description:"Info"},{id:"details",title:"Details",description:"Settings"},{id:"prizes",title:"Prizes",description:"Distribution"},{id:"review",title:"Review",description:"Create"}];function Ce({currentStep:r}){return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"hidden md:flex items-center justify-between mb-8",children:M.map((t,i)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${i<=r?"border-primary-500 bg-primary-500 text-gray-900 dark:text-white":i===r+1?"border-primary-500 bg-white dark:bg-neutral-800 text-primary-500":"border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 text-gray-400 dark:text-gray-500"}`,children:i<r?e.jsx(q,{className:"h-5 w-5"}):e.jsx("span",{className:"font-semibold",children:i+1})}),e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-900 dark:text-white",children:t.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.description})]})]}),i<M.length-1&&e.jsx("div",{className:`w-24 h-1 mx-2 ${i<r?"bg-primary-500":"bg-gray-200 dark:bg-neutral-700"}`})]},t.id))}),e.jsxs("div",{className:"md:hidden",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:M.map((t,i)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${i<=r?"border-primary-500 bg-primary-500 text-gray-900 dark:text-white":"border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 text-gray-400 dark:text-gray-500"}`,children:i<r?e.jsx(q,{className:"h-4 w-4"}):e.jsx("span",{className:"text-sm font-semibold",children:i+1})}),e.jsx("div",{className:"mt-1 text-center",children:e.jsx("div",{className:"text-xs font-medium text-gray-900 dark:text-gray-900 dark:text-white",children:t.title})})]},t.id))}),e.jsx("div",{className:"relative h-1 bg-gray-200 dark:bg-neutral-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-primary-500 transition-all duration-300 ease-out",style:{width:`${r/(M.length-1)*100}%`}})}),e.jsx("div",{className:"mt-2 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Step ",r+1," of ",M.length,": ",M[r].description]})})]})]})}function Fe({currentStep:r,prevStep:t,nextStep:i,isSubmitting:u,stepsLength:g,submitButtonText:p}){const a=r===g-1;return e.jsxs("div",{className:"flex flex-row items-center justify-between gap-3 w-full",children:[e.jsx("div",{className:"flex-1",children:r>0&&e.jsxs("button",{type:"button",onClick:t,disabled:u,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-3 border border-gray-300 dark:border-neutral-600 shadow-sm text-sm font-medium rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-neutral-800 hover:bg-gray-50 dark:hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 transition-colors",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden xs:block",children:"Previous"})]})}),e.jsx("div",{className:"flex-1 flex justify-end",children:a?e.jsx("button",{type:"submit",disabled:u,className:"w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-sm text-black bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:p}):e.jsxs("button",{type:"button",onClick:i,disabled:u,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-lg shadow-sm text-black bg-primary-500 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 transition-colors",children:["Continue",e.jsx(de,{className:"h-4 w-4 ml-2"})]})})]})}function De({register:r,errors:t,games:i,platforms:u,filteredGameModes:g,selectedGameId:p}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-900 dark:text-white",children:"Tournament Basics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:"Start by setting up the foundation of your tournament"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tournament Name *"}),e.jsx("input",{type:"text",id:"name",...r("name"),className:"mt-1 block w-full rounded-lg border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-3 px-4 text-gray-900 dark:text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 text-base md:text-sm transition-colors",placeholder:"e.g., Spring Championship 2024"}),t.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.name.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"game_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Game *"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsxs("select",{id:"game_id",...r("game_id",{valueAsNumber:!0}),className:"block w-full rounded-lg border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-3 px-4 text-gray-900 dark:text-gray-900 dark:text-white focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 text-base md:text-sm appearance-none transition-colors",children:[e.jsx("option",{value:"",children:"Select a game"}),i.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.game_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.game_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"platform_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Platform *"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsxs("select",{id:"platform_id",...r("platform_id",{valueAsNumber:!0}),className:"block w-full rounded-lg border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-3 px-4 text-gray-900 dark:text-gray-900 dark:text-white focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 text-base md:text-sm appearance-none transition-colors",children:[e.jsx("option",{value:"",children:"Select a platform"}),u.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.platform_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.platform_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"game_mode_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Game Mode *"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsxs("select",{id:"game_mode_id",...r("game_mode_id",{valueAsNumber:!0}),className:"block w-full rounded-lg border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-3 px-4 text-gray-900 dark:text-gray-900 dark:text-white focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 text-base md:text-sm appearance-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!p,children:[e.jsx("option",{value:"",children:"Select a game mode"}),g.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.game_mode_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.game_mode_id.message}),!p&&e.jsx("p",{className:"mt-2 text-sm text-yellow-600 dark:text-yellow-400",children:"Please select a game first"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"format",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tournament Format *"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsxs("select",{id:"format",...r("format"),className:"block w-full rounded-lg border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-3 px-4 text-gray-900 dark:text-gray-900 dark:text-white focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 text-base md:text-sm appearance-none transition-colors",children:[e.jsx("option",{value:"",children:"Select a format"}),e.jsx("option",{value:"single_elimination",children:"Single Elimination"}),e.jsx("option",{value:"double_elimination",children:"Double Elimination"}),e.jsx("option",{value:"round_robin",children:"Round Robin"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.format&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.format.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"visibility",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Visibility"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsxs("select",{id:"visibility",...r("visibility"),className:"block w-full rounded-lg border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-3 px-4 text-gray-900 dark:text-gray-900 dark:text-white focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 text-base md:text-sm appearance-none transition-colors",children:[e.jsx("option",{value:"public",children:"Public - Anyone can join"}),e.jsx("option",{value:"private",children:"Private - Invite only"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.visibility&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.visibility.message})]})]})]})]})}function Ee({register:r,errors:t,setValue:i,watch:u,rulesArray:g=[]}){const[p,a]=s.useState(g||[]),[b,_]=s.useState(""),[N,y]=s.useState(null),[v,f]=s.useState("");s.useEffect(()=>{Array.isArray(g)&&g.length>0&&a(g)},[g]);const n=()=>{if(!b.trim())return;const l=[...p,b.trim()];a(l),i("rules",l,{shouldValidate:!0}),_("")},d=l=>{const o=p.filter((z,C)=>C!==l);a(o),i("rules",o,{shouldValidate:!0}),N===l&&(y(null),f(""))},j=(l,o)=>{y(l),f(o)},m=l=>{if(!v.trim())return;const o=[...p];o[l]=v.trim(),a(o),i("rules",o,{shouldValidate:!0}),y(null),f("")},k=()=>{y(null),f("")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:"Tournament Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:"Configure the tournament details and rules"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"entry_fee",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Entry Fee ($) *"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"$"})}),e.jsx("input",{type:"number",id:"entry_fee",step:"0.01",min:"0",...r("entry_fee",{valueAsNumber:!0}),className:"block w-full pl-8 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 py-3 px-4 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-base md:text-sm transition-colors",placeholder:"0.00"})]}),t.entry_fee&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.entry_fee.message}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Set to 0 for a free tournament"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"total_slots",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Slots *"}),e.jsx("input",{type:"number",id:"total_slots",min:"2",max:"128",...r("total_slots",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 py-3 px-4 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-base md:text-sm transition-colors",placeholder:"16"}),t.total_slots&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.total_slots.message}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Number of participants (2-128)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"start_time",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Start Time *"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"datetime-local",id:"start_time",...r("start_time"),className:"block w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 py-3 px-4 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-base md:text-sm transition-colors"})}),t.start_time&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.start_time.message}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Tournament must start at least 1 hour from now"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rules & Guidelines"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[p.length," rule",p.length!==1?"s":""," added"]})]}),e.jsx("input",{type:"hidden",...r("rules",{validate:l=>!Array.isArray(l)||l.length===0?"At least one rule is required":!0})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:l=>_(l.target.value),onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),n())},placeholder:"Add a new rule (e.g., 'No cheating allowed')",className:"flex-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 py-2.5 px-3 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"}),e.jsxs("button",{type:"button",onClick:n,disabled:!b.trim(),className:"inline-flex items-center gap-1.5 bg-primary-500 hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium py-2.5 px-4 rounded-lg transition-colors text-sm",children:[e.jsx(pe,{className:"h-4 w-4"}),"Add"]})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Press Enter or click Add to include a rule"})]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:p.length===0?e.jsx("div",{className:"text-center py-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No rules added yet. Add your first rule above."})}):p.map((l,o)=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-3 flex items-start gap-3 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-700 rounded-full h-5 w-5 flex items-center justify-center flex-shrink-0 mt-0.5",children:o+1}),N===o?e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsx("input",{type:"text",value:v,onChange:z=>f(z.target.value),onKeyDown:z=>{z.key==="Enter"&&m(o),z.key==="Escape"&&k()},className:"flex-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500",autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>m(o),className:"text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 p-1",title:"Save",children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:k,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 p-1",title:"Cancel",children:e.jsx(oe,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:l})}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>j(o,l),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:"Edit rule",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>d(o),className:"text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 p-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20",title:"Remove rule",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})]},o))}),t.rules&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.rules.message}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Tip:"})," Add clear, specific rules. Common rules include:"]}),e.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 space-y-0.5 pl-4",children:[e.jsx("li",{children:"• No cheating or hacking"}),e.jsx("li",{children:"• Respect all players"}),e.jsx("li",{children:"• Matches must start within 10 minutes of schedule"}),e.jsx("li",{children:"• Screenshot evidence required for disputes"})]})]})]})]})]})}function Te({errors:r,watch:t,addPrizePosition:i,removePrizePosition:u,updatePrizePercentage:g,register:p,setValue:a,clearErrors:b,userBalance:_=0}){const N=t(),y=t("prize_distribution")||[],v=parseFloat(N.entry_fee||0),f=parseInt(N.total_slots||0),n=v*f,[d,j]=s.useState(n),[m,k]=s.useState(!1),[l,o]=s.useState(0),[z,C]=s.useState(!1),A=m?d:n,w=y.reduce((c,P)=>c+(P.percentage||0),0),E=c=>(c||0)/100*A,I=c=>{const P=parseFloat(c)||0;if(j(P),a("prize_pool",P,{shouldValidate:!0}),P>=n){const D=P-n;o(D),_&&_<v+D?C(!0):C(!1),b?.("prize_pool")}},R=c=>{k(c),c?a("prize_pool",d,{shouldValidate:!0}):(j(n),a("prize_pool",n,{shouldValidate:!0}),o(0),C(!1))};return s.useEffect(()=>{if(N.prize_pool!==void 0&&N.prize_pool!==null&&N.prize_pool!==""){const c=parseFloat(N.prize_pool);!isNaN(c)&&c!==n&&(j(c),k(!0),I(c))}},[N.prize_pool,n]),s.useEffect(()=>{m||(j(n),a("prize_pool",n,{shouldValidate:!0}))},[n,m,a]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:"Prize Distribution"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:"Configure how the prize pool is distributed"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800/30 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Default Prize Pool"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Automatically calculated from entry fee and slots"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h(n,"USD")}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["$",v.toFixed(2)," × ",f," players"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Boost Prize Pool"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add extra funds to make your tournament more attractive"})]}),e.jsx("button",{type:"button",onClick:()=>R(!m),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${m?"bg-green-500":"bg-gray-300 dark:bg-neutral-600"}`,children:e.jsx("span",{className:`
                inline-block h-4 w-4 transform rounded-full transition-transform
                bg-sky-400 
                shadow-lg shadow-black/40 
                ring-1 ring-sky-600/30
                ${m?"translate-x-6":"translate-x-1"}
              `})})]}),m&&e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"p-4 bg-white dark:bg-neutral-800 border border-gray-300 dark:border-neutral-600 rounded-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Custom Prize Pool Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",min:n,step:"0.01",value:d,onChange:c=>I(c.target.value),className:"w-full pl-8 pr-4 py-3 border border-gray-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-white focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:`Minimum: ${h(n,"USD")}`})]}),r?.prize_pool&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:r.prize_pool.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Default prize pool:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:h(n,"USD")})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Your additional contribution:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["+",h(l,"USD")]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold pt-3 border-t border-gray-200 dark:border-neutral-700",children:[e.jsx("span",{className:"text-gray-900 dark:text-white",children:"Total prize pool:"}),e.jsx("span",{className:"text-primary-600 dark:text-primary-400",children:h(A,"USD")})]})]}),_>0&&e.jsxs("div",{className:"pt-3 border-t border-gray-200 dark:border-neutral-700",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Your current balance:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:h(_,"USD")})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total you'll pay:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:h(v+l,"USD")})]}),l>0&&e.jsx("div",{className:"text-sm mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-yellow-500 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Additional funds required"}),e.jsxs("p",{className:"text-yellow-700 dark:text-yellow-400 text-sm mt-1",children:["You'll need to pay an additional ",h(l,"USD")," from your balance to boost the prize pool. This will be deducted along with your entry fee."]})]})]})}),z&&e.jsx("div",{className:"text-sm mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-red-500 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800 dark:text-red-300",children:"Insufficient balance"}),e.jsxs("p",{className:"text-red-700 dark:text-red-400 text-sm mt-1",children:["You need ",h(v+l,"USD")," (entry fee + prize boost) but only have ",h(_,"USD"),". Reduce the prize pool or add funds to your wallet."]})]})]})})]})]})})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Prize Distribution"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total: ",e.jsxs("span",{className:`font-bold ${w===100?"text-green-600":"text-red-600"}`,children:[w.toFixed(1),"%"]})]})]}),y.map((c,P)=>{const D=E(c.percentage);return e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-neutral-700/30 rounded-lg border border-gray-200 dark:border-neutral-600",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400 text-sm font-semibold",children:c.position}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Position #",c.position]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-2",children:["Percentage: ",c.percentage||0,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"0.5",value:c.percentage||0,onChange:L=>g(P,L.target.value),className:"w-full h-2 bg-gray-200 dark:bg-neutral-600 rounded-lg appearance-none cursor-pointer slider-thumb"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:c.percentage||0,onChange:L=>g(P,L.target.value),className:"w-24 rounded-lg border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-2 px-3 text-gray-900 dark:text-white text-center focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"%"}),e.jsxs("div",{className:"ml-auto text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:h(D,"USD")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prize amount"})]})]})]})]}),P>0&&e.jsx("button",{type:"button",onClick:()=>u(P),className:"mt-4 md:mt-0 px-4 py-2 border border-red-300 dark:border-red-700 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-sm font-medium transition-colors",children:"Remove"})]})},P)}),r.prize_distribution&&e.jsx("div",{className:"rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 p-4",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.prize_distribution.message})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 pt-4",children:[e.jsxs("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-neutral-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-neutral-700 text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Prize Position"]}),e.jsxs("div",{className:"text-center md:text-right",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Percentage"}),e.jsxs("div",{className:`text-xl font-bold ${w===100?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[w.toFixed(1),"%"]}),w!==100&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:"Total must equal 100%"})]})]})]})]})]})}function Re({register:r,errors:t,watch:i,games:u,platforms:g,filteredGameModes:p}){const a=i(),b=u.find(m=>m.id===a.game_id),_=g.find(m=>m.id===a.platform_id),N=p.find(m=>m.id===a.game_mode_id),y=parseFloat(a.entry_fee||0),v=parseInt(a.total_slots||0),f=y*v,n=a.prize_pool?parseFloat(a.prize_pool):null,d=n!==null?n:f,j=n?n-f:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:"Almost There!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:"Review your tournament details and add your gamer tag"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-neutral-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-neutral-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(ce,{className:"h-5 w-5 text-green-500 mr-2"}),"Tournament Summary"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-neutral-700/30 p-3 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tournament Name"}),e.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:a.name||"Not set"})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-700/30 p-3 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Visibility"}),e.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white capitalize",children:a.visibility==="public"?"Public Tournament":"Private Tournament"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-700/30 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Game Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Game"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:b?.name||"Not selected"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Platform"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:_?.name||"Not selected"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Game Mode"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:N?.name||"Not selected"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-neutral-700/30 p-3 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Format"}),e.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white capitalize",children:a.format?.replace(/_/g," ")||"Not set"})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-700/30 p-3 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Slots & Entry"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"h-4 w-4 text-gray-400"}),e.jsxs("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:[v," slots"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[h(y,"USD")," entry fee"]})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-700/30 p-3 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Start Time"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.start_time?new Date(a.start_time).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Not set"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-700/30 p-4 rounded-lg border border-gray-200 dark:border-neutral-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Prize Pool Details"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Prize Pool"}),e.jsx("p",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:h(d,"USD")})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Default Prize Pool:"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:h(f,"USD")})]}),j>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your Additional Contribution:"})]}),e.jsxs("p",{className:"text-lg font-medium text-green-600 dark:text-green-400",children:["+",h(j,"USD")]})]})]}),j>0&&e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-yellow-500 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-300 text-sm",children:"Additional payment required"}),e.jsxs("p",{className:"text-yellow-700 dark:text-yellow-400 text-sm mt-1",children:["You'll pay an additional ",h(j,"USD"),"(entry fee: ",h(y,"USD")," + prize boost: ",h(j,"USD"),")"]})]})]})})]})]}),a.rules&&e.jsxs("div",{className:"bg-white dark:bg-neutral-700/30 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Rules & Guidelines"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:a.rules})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-700/30 p-4 rounded-lg border border-gray-200 dark:border-neutral-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"h-5 w-5 text-yellow-500 mr-2"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Prize Distribution"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Based on ",h(d,"USD")]})})]}),e.jsx("div",{className:"space-y-2",children:a.prize_distribution?.map((m,k)=>{const l=(m.percentage||0)/100*d;return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-neutral-600 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:`h-4 w-4 ${k===0?"text-yellow-500":k===1?"text-gray-400":k===2?"text-orange-500":"text-gray-300"}`}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[m.position,"st Place"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:h(l,"USD")}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[m.percentage||0,"% of prize pool"]})]})]},k)})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-neutral-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Your Gamer Tag"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gamer_tag",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter your gamer tag for this tournament *"}),e.jsx("input",{type:"text",id:"gamer_tag",...r("gamer_tag"),className:"block w-full rounded-lg border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-3 px-4 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 text-base md:text-sm transition-colors",placeholder:"Enter your gamer tag (e.g., ProGamer123)"}),t.gamer_tag&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:t.gamer_tag.message}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"This will be displayed to other participants in the tournament. Make sure it's accurate!"})]})]})]})]})}const K=[{id:"basic",title:"Basic Info",description:"Tournament fundamentals"},{id:"details",title:"Details",description:"Settings & rules"},{id:"prizes",title:"Prizes",description:"Prize distribution"},{id:"review",title:"Review",description:"Confirm & create"}],$="tournamentFormDraft",B=["Setting up your tournament...","Configuring prize distribution...","Preparing tournament lobby...","Almost there...","Making things ready...","Finalizing details...","Hold on, we're creating something awesome!","Just a few more seconds...","Your tournament is being crafted...","Getting everything in place..."];function Le({initialData:r={},onSubmit:t,isSubmitting:i=!1,error:u="",success:g="",submitButtonText:p="Create Tournament"}){const[a,b]=s.useState(0),[_,N]=s.useState([]),[y,v]=s.useState([]),[f,n]=s.useState([]),[d,j]=s.useState([]),[m,k]=s.useState(!0),[l,o]=s.useState(B[0]),{user:z}=Z(),{register:C,handleSubmit:A,watch:w,setValue:E,trigger:I,formState:{errors:R},reset:c,clearErrors:P}=me({resolver:xe(ke),defaultValues:{visibility:"public",prize_distribution:[{position:1,percentage:100}],...r}}),D=w("game_id"),L=w(),[Y,Q]=s.useState(window.innerWidth<768);s.useEffect(()=>{const x=()=>{Q(window.innerWidth<768)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),s.useEffect(()=>{let x;if(i){let S=0;o(B[0]),x=setInterval(()=>{S=(S+1)%B.length,o(B[S])},3e3)}return()=>{x&&clearInterval(x)}},[i]),s.useEffect(()=>{(async()=>{try{const[F,T,G]=await Promise.all([W.getGames(),W.getPlatforms(),W.getGameModes()]);N(F),v(T),n(G)}catch(F){console.error("Failed to load data:",F)}finally{k(!1)}})();const S=localStorage.getItem($);if(S){const{formData:F,step:T}=JSON.parse(S);c(F),b(T||0)}},[c]),s.useEffect(()=>{const x=setTimeout(()=>{localStorage.setItem($,JSON.stringify({formData:L,step:a}))},800);return()=>clearTimeout(x)},[L,a]),s.useEffect(()=>{g&&localStorage.removeItem($)},[g]),s.useEffect(()=>{if(D){const x=f.filter(S=>S.game_id===parseInt(D));j(x)}else j([])},[D,f]);const X=x=>({0:["name","game_id","platform_id","game_mode_id","format","visibility"],1:["entry_fee","total_slots","start_time","rules"],2:["prize_distribution","prize_pool"],3:["gamer_tag"]})[x]||[],ee=async()=>{const x=X(a);await I(x)&&(b(F=>Math.min(F+1,K.length-1)),Y&&window.scrollTo({top:0,behavior:"smooth"}))},te=()=>{b(x=>Math.max(x-1,0)),Y&&window.scrollTo({top:0,behavior:"smooth"})},re=()=>{const x=w("prize_distribution")||[],S=x.length+1;E("prize_distribution",[...x,{position:S,percentage:0}])},ae=x=>{const F=w("prize_distribution").filter((T,G)=>G!==x);E("prize_distribution",F)},se=(x,S)=>{const T=[...w("prize_distribution")];T[x].percentage=parseFloat(S)||0,E("prize_distribution",T)},le=()=>{localStorage.removeItem($),c(r),b(0)},ie=()=>{switch(a){case 0:return e.jsx(De,{register:C,errors:R,games:_,platforms:y,filteredGameModes:d,selectedGameId:D,watch:w});case 1:return e.jsx(Ee,{register:C,errors:R,setValue:E,watch:w,rulesArray:w("rules")||[]});case 2:return e.jsx(Te,{register:C,errors:R,watch:w,setValue:E,clearErrors:P,addPrizePosition:re,removePrizePosition:ae,updatePrizePercentage:se,userBalance:z?.wallet_balance||0});case 3:return e.jsx(Re,{register:C,errors:R,watch:w,games:_,platforms:y,filteredGameModes:d});default:return null}},ne=()=>i?e.jsx("div",{className:"fixed inset-0 bg-black/75 dark:bg-black/90 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-neutral-800 p-6 md:p-8 rounded-xl shadow-2xl max-w-sm md:max-w-md w-full mx-4 text-center",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsx(U,{size:"xl",className:"mx-auto"})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 dark:text-white mb-3 md:mb-4",children:"Creating Your Tournament"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 md:mb-6 min-h-[24px] text-sm md:text-base transition-all duration-500",children:l}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-neutral-700 rounded-full h-1.5 md:h-2",children:e.jsx("div",{className:"bg-primary-500 dark:bg-primary-600 h-1.5 md:h-2 rounded-full transition-all duration-1000 animate-pulse",style:{width:"85%"}})}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-3 md:mt-4",children:"This may take a few moments..."})]})}):null;return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(U,{size:"lg",text:"Loading tournament data..."})}):e.jsxs("div",{className:"bg-white dark:bg-neutral-800 p-4 md:p-6 rounded-lg md:rounded-xl border border-gray-200 dark:border-neutral-700 shadow-sm relative",children:[ne(),e.jsx("div",{className:"mb-6",children:e.jsx(Ce,{currentStep:a})}),u&&e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsx(V,{type:"error",title:"Form Error",message:u})}),g&&e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsx(V,{type:"success",title:"Success!",message:g})}),e.jsxs("form",{onSubmit:A(t),children:[e.jsx("div",{className:"mb-6 md:mb-8",children:ie()}),e.jsx("div",{className:"mt-8",children:e.jsx(Fe,{currentStep:a,prevStep:te,nextStep:ee,isSubmitting:i,stepsLength:K.length,submitButtonText:i?e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(U,{size:"sm"}),e.jsx("span",{children:"Creating..."})]}):p})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-neutral-700",children:[e.jsx("button",{onClick:le,className:"w-full md:w-auto text-sm text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300 py-2 px-4 border border-gray-200 dark:border-neutral-700 rounded-lg hover:bg-gray-50 dark:hover:bg-neutral-700 transition-colors",children:"Clear Saved Draft"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This will delete your saved progress."})]}),e.jsx("div",{className:"mt-6",children:e.jsx(V,{type:"info",message:"Need help setting up your tournament? Check out our creation guide.",action:{text:"View Guide",to:"/support"}})}),e.jsx("div",{className:"h-16 md:h-0"})]})}function Ye(){const r=ue(),[t,i]=s.useState(!1),[u,g]=s.useState(""),[p,a]=s.useState(""),{user:b,updateUser:_}=Z(),[N,y]=s.useState(!1),v=async d=>{console.log("Prize pool from form:",d.prize_pool);const j=new Date(d.start_time),m=new Date(j.getTime()-j.getTimezoneOffset()*6e4);i(!0),g(""),a("");try{const k={...d,start_time:m.toISOString(),game_id:parseInt(d.game_id),platform_id:parseInt(d.platform_id),game_mode_id:parseInt(d.game_mode_id),entry_fee:parseFloat(d.entry_fee),prize_pool:d.prize_pool?parseFloat(d.prize_pool):void 0,total_slots:parseInt(d.total_slots),rules:Array.isArray(d.rules)?d.rules.join(`
`):d.rules||"",gamer_tag:d.gamer_tag||b?.default_gamer_tag||b?.username},l=await O.create(k);let o=null;try{const z={name:`tournament-${l.tournament.id}`,description:`Chat for tournament: ${l.tournament.name}`,type:"group",isPrivate:!1,metadata:{tournamentId:l.tournament.id,tournamentName:l.tournament.name,createdBy:b.id,createdAt:new Date().toISOString()}},C=await he.createChannel(z);o=C.id||C.data?.channel?.id}catch(z){console.warn("Failed to create tournament channel:",z)}if(o)try{await O.update(l.tournament.id,{chat_channel_id:o})}catch(z){console.warn("Failed to update tournament with channel ID:",z)}a(l.message||"Tournament created successfully!"),l.new_balance!==void 0&&_({wallet_balance:l.new_balance}),setTimeout(()=>{r(`/tournaments/${l.tournament.id}`)},4e3)}catch(k){console.error("Tournament creation error:",k),g(k.response?.data?.message||"Failed to create tournament. Please try again.")}finally{i(!1)}},f=()=>{window.innerWidth<768?y(!0):r("/tournaments")},n=()=>e.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>y(!1)}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-neutral-800 rounded-t-2xl p-6 shadow-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-900 dark:text-white mb-4",children:"Exit Tournament Creation?"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Your progress will be saved as a draft."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{y(!1),r("/tournaments")},className:"w-full bg-red-600 text-gray-900 dark:text-white py-3 rounded-lg font-medium",children:"Exit & Save Draft"}),e.jsx("button",{onClick:()=>y(!1),className:"w-full border border-gray-300 dark:border-neutral-600 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-medium",children:"Continue Creating"})]})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-900",children:[e.jsx("div",{className:"md:hidden bg-white dark:bg-neutral-800 border-b border-gray-200 dark:border-neutral-700 px-4 py-3 sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:f,className:"p-2 text-gray-600 dark:text-gray-400",children:e.jsx(J,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-900 dark:text-white",children:"Create Tournament"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Step-by-step setup"})]})]}),e.jsx("button",{onClick:f,className:"p-2 text-gray-600 dark:text-gray-400",children:e.jsx(ge,{className:"h-5 w-5"})})]})}),e.jsxs("main",{className:"mx-auto max-w-4xl py-4 md:py-8 px-3 sm:px-4 lg:px-8",children:[e.jsxs("div",{className:"hidden md:flex md:items-center md:justify-between mb-8",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-900 dark:text-white",children:"Create Tournament"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Follow the steps to set up your tournament. You can go back to make changes anytime."})]}),e.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:e.jsx("button",{type:"button",onClick:()=>r("/tournaments"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-neutral-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-neutral-800 hover:bg-gray-50 dark:hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"})})]}),e.jsx(Le,{onSubmit:v,isSubmitting:t,error:u,success:p,submitButtonText:t?"Creating Tournament...":"Create Tournament",initialData:{gamer_tag:b?.default_gamer_tag||b?.username||""}})]}),N&&e.jsx(n,{})]})}export{Ye as default};
