import{aU as fe,aV as je,bc as l,bd as X,aX as we,be as J,f as m,ay as S,ax as R,aB as U,j as e,r as n,aD as ke,b8 as ee,u as Ne,aQ as ve,aR as Se,bf as y,bg as De,B as z,aS as G}from"./index-Dd7dhgAO.js";import{a as te,b as Ce}from"./formatters-DuOnlAX0.js";import{F as V}from"./ArrowPathIcon-BDzFR-8G.js";import{F as M}from"./ClockIcon-DpHVzJ4M.js";import{a as _e,F as Fe}from"./UserCircleIcon-B5TCXpP0.js";import{F as Pe}from"./BanknotesIcon-9hj_nB3X.js";import{F as ae}from"./CurrencyDollarIcon-DqON1HzM.js";import{F as se}from"./CheckIcon-FxAnfe32.js";const K=X(),k=J(),Re=()=>fe({amount:we().min(k.minDeposit,`Minimum deposit is ${m(k.minDeposit)}`).max(k.maxDeposit,`Maximum deposit is ${m(k.maxDeposit)}`).refine(t=>t%k.step===0,{message:`Amount must be in multiples of ${k.step}`}),...l()?{phoneNumber:je().min(9,"Phone number must be at least 9 digits").max(12,"Phone number is too long").regex(/^[0-9]+$/,"Phone number must contain only digits").transform(t=>{if(K.code==="TZS"){if(!t.startsWith("255"))return t.startsWith("0")?`255${t.slice(1)}`:`255${t}`}else if(K.code==="KES"&&!t.startsWith("254"))return t.startsWith("0")?`254${t.slice(1)}`:`254${t}`;return t})}:{}}),$e=({status:t})=>{const i={initiated:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",text:"Initiated",icon:M},pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",text:"Pending",icon:M},processing:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",text:"Processing",icon:V},successful:{color:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300",text:"Successful",icon:U},failed:{color:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",text:"Failed",icon:R},cancelled:{color:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",text:"Cancelled",icon:R},expired:{color:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300",text:"Expired",icon:S}},o=i[t]||i.pending,x=o.icon;return e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-medium ${o.color}`,children:[e.jsx(x,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),o.text]})},Ie=({status:t,orderReference:i})=>{if(!t)return null;const o=()=>{switch(t.deposit_status){case"successful":return e.jsx(U,{className:"h-6 w-6 md:h-8 md:w-8 text-green-500"});case"failed":return e.jsx(R,{className:"h-6 w-6 md:h-8 md:w-8 text-red-500"});case"cancelled":return e.jsx(R,{className:"h-6 w-6 md:h-8 md:w-8 text-gray-500"});case"expired":return e.jsx(S,{className:"h-6 w-6 md:h-8 md:w-8 text-orange-500"});default:return e.jsx(M,{className:"h-6 w-6 md:h-8 md:w-8 text-yellow-500 animate-pulse"})}},x=()=>{switch(t.deposit_status){case"successful":return"Deposit completed successfully!";case"failed":return"Deposit failed. Please try again.";case"cancelled":return"Deposit was cancelled.";case"expired":return"Deposit request expired. Please initiate a new one.";case"processing":return"Payment is being processed. Check your payment method.";case"pending":return"Waiting for payment confirmation...";default:return l()?"Deposit initiated. Check your phone for USSD prompt.":"Deposit initiated. Check your payment method."}},c=(()=>{if(!t.created_at)return null;const r=new Date(t.created_at);return Math.floor((new Date-r)/(1e3*60))})(),b=c>5&&["pending","processing","initiated"].includes(t.deposit_status);return e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-4 md:p-6 mb-6 border border-gray-200 dark:border-neutral-700 shadow-lg",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4 flex-1 min-w-0",children:[e.jsx("div",{className:"p-1.5 md:p-2 bg-gray-100 dark:bg-neutral-700 rounded-lg flex-shrink-0",children:o()}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 dark:text-gray-900 dark:text-white truncate",children:"Deposit Status"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[e.jsx($e,{status:t.deposit_status}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-300 truncate",children:x()})]}),c!==null&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Initiated ",c," minute",c!==1?"s":""," ago"]})]})]})}),b&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"h-4 w-4 md:h-5 md:w-5 text-yellow-500 flex-shrink-0"}),e.jsxs("p",{className:"text-xs md:text-sm text-yellow-700 dark:text-yellow-300 flex-1",children:["This payment has been pending for ",c," minutes. You can force update the status."]})]})}),i&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-neutral-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-neutral-700/30 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Reference"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 dark:text-gray-900 dark:text-white font-mono truncate mt-1",children:i})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-neutral-700/30 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Amount"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-900 dark:text-white mt-1",children:m(t.display_amount||0,"TZS")})]})]}),t.phone_number&&l()&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-neutral-700/30 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phone Number"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-900 dark:text-white mt-1",children:te(t.phone_number)})]}),t.created_at&&e.jsxs("div",{className:"bg-gray-50 dark:bg-neutral-700/30 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Initiated At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-900 dark:text-white mt-1",children:Ce(t.created_at)})]})]})]})]})},Ae=({amounts:t,selectedAmount:i,onSelect:o})=>{const[x,p]=n.useState(0),c=()=>{p(r=>Math.max(r-1,0))},b=()=>{p(r=>Math.min(r+1,t.length-3))};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"hidden md:grid md:grid-cols-3 lg:grid-cols-6 gap-2 md:gap-3",children:t.map(r=>e.jsx("button",{type:"button",onClick:()=>o(r),className:`py-2 md:py-3 px-3 md:px-4 text-sm md:text-base font-medium rounded-lg transition-all ${i===r?"bg-primary-500 text-gray-900 dark:text-white shadow-lg":"bg-gray-100 dark:bg-neutral-700 hover:bg-gray-200 dark:hover:bg-neutral-600 text-gray-900 dark:text-gray-900 dark:text-white"}`,children:m(r)},r))}),e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:c,disabled:x===0,className:"p-2 text-gray-500 disabled:opacity-30",children:e.jsx(_e,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"flex transition-transform duration-300",style:{transform:`translateX(-${x*(100/3)}%)`},children:t.map(r=>e.jsx("div",{className:"w-1/3 flex-shrink-0 px-1",children:e.jsx("button",{type:"button",onClick:()=>o(r),className:`w-full py-2 text-sm font-medium rounded-lg transition-all ${i===r?"bg-primary-500 text-gray-900 dark:text-white shadow-lg":"bg-gray-100 dark:bg-neutral-700 hover:bg-gray-200 dark:hover:bg-neutral-600 text-gray-900 dark:text-gray-900 dark:text-white"}`,children:m(r)})},r))})}),e.jsx("button",{onClick:b,disabled:x>=t.length-3,className:"p-2 text-gray-500 disabled:opacity-30",children:e.jsx(ke,{className:"h-5 w-5"})})]})})]})},Ee=({validationResult:t,selectedMethod:i,onSelectMethod:o,onClearValidation:x})=>{if(!t?.valid)return null;const{available_methods:p=[],sender_details:c,message:b}=t;return e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-4 md:p-6 mb-6 border border-gray-200 dark:border-neutral-700 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"p-1.5 md:p-2 bg-green-500/20 rounded-lg flex-shrink-0",children:e.jsx(U,{className:"h-4 w-4 md:h-6 md:w-6 text-green-500"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm md:text-lg font-semibold text-gray-900 dark:text-gray-900 dark:text-white truncate",children:l()?"Phone Verified ✓":"Payment Method Verified ✓"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:b})]})]}),e.jsx("button",{onClick:x,className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 ml-2 flex-shrink-0",children:"Change"})]}),c&&e.jsxs("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-gray-50 dark:bg-neutral-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 mb-2 md:mb-3",children:[e.jsx(Fe,{className:"h-4 w-4 md:h-5 md:w-5 text-primary-500 dark:text-primary-400"}),e.jsx("h4",{className:"text-xs md:text-sm font-medium text-gray-900 dark:text-gray-900 dark:text-white",children:"Account Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Account Name"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-900 dark:text-white font-medium truncate",children:c.accountName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Provider"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-900 dark:text-white font-medium",children:c.accountProvider})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 mb-3 md:mb-4",children:[e.jsx(Pe,{className:"h-4 w-4 md:h-5 md:w-5 text-primary-500 dark:text-primary-400"}),e.jsx("h4",{className:"text-xs md:text-sm font-medium text-gray-900 dark:text-gray-900 dark:text-white",children:"Available Payment Methods"})]}),p.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(S,{className:"h-6 w-6 md:h-8 md:w-8 text-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No payment methods available"})]}):e.jsx("div",{className:"space-y-2 md:space-y-3",children:p.map(r=>e.jsx("button",{type:"button",onClick:()=>o(r),className:`w-full p-3 md:p-4 rounded-lg md:rounded-xl border transition-all duration-200 text-left ${i?.name===r.name?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 shadow-sm md:shadow-lg":"border-gray-200 dark:border-neutral-600 hover:border-gray-300 dark:hover:border-neutral-500 bg-gray-50 dark:bg-neutral-800"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 min-w-0",children:[r.type==="mobile"?e.jsx(ee,{className:"h-4 w-4 md:h-6 md:w-6 text-primary-500 dark:text-primary-400 flex-shrink-0"}):e.jsx(ae,{className:"h-4 w-4 md:h-6 md:w-6 text-primary-500 dark:text-primary-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"text-sm md:text-base font-semibold text-gray-900 dark:text-gray-900 dark:text-white truncate",children:r.name}),e.jsx("div",{className:"flex items-center space-x-1 md:space-x-2 mt-0.5",children:e.jsx("span",{className:`px-1.5 py-0.5 md:px-2 md:py-1 rounded-full text-xs font-medium ${r.status==="AVAILABLE"?"bg-green-500/20 text-green-600 dark:text-green-400":"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400"}`,children:r.status})})]})]}),i?.name===r.name&&e.jsx(se,{className:"h-4 w-4 md:h-5 md:w-5 text-primary-500 dark:text-primary-400 flex-shrink-0"})]})},r.name))})]})]})},g=X(),f=J();function He(){const[t,i]=n.useState(!1),[o,x]=n.useState(!1),[p,c]=n.useState(!1),[b,r]=n.useState(!1),[$,u]=n.useState(""),[T,j]=n.useState(""),[N,I]=n.useState(null),[D,C]=n.useState(null),[_,re]=n.useState(null),[h,de]=n.useState(null),[v,w]=n.useState(null),[le,F]=n.useState(null),{user:A,updateUser:B}=Ne(),ne=Re(),{register:W,handleSubmit:ie,formState:{errors:P,isValid:ce},setValue:L,watch:oe,trigger:me,getValues:Y,reset:H}=ve({resolver:Se(ne),mode:"onChange",defaultValues:{amount:f.minDeposit,...l()?{phoneNumber:""}:{}}}),Q=oe("amount");n.useEffect(()=>{if(N&&D?.deposit_status!=="successful"){const a=setInterval(()=>{E(N)},1e4);return de(a),()=>{a&&clearInterval(a)}}},[N,D]),n.useEffect(()=>()=>{h&&clearInterval(h)},[h]);const O=async()=>{try{const a=await y.getDepositStats();a.success&&re(a.data)}catch(a){console.error("Failed to load deposit stats:",a)}},xe=async()=>{if(!l()){w({valid:!0,message:"Proceed with deposit",available_methods:[{name:`${g.name} Payment`,type:"currency",status:"AVAILABLE"}]});return}const a=Y("phoneNumber");if(!a){u("Please enter a phone number first");return}x(!0),u(""),w(null),F(null);try{const s=await y.validatePhoneNumber(a);if(!s.success)throw new Error(s.error||"Validation failed");const d=s.data;if(!d.valid){u(d.message||"Invalid phone number format");return}w(d)}catch(s){console.error("Validation error:",s),u(s.message||"Failed to validate phone number. Please try again.")}finally{x(!1)}},ue=a=>{F(a)},Z=()=>{w(null),F(null)},ge=async a=>{i(!0),u(""),j("");try{const s=await y.createMobileMoneyDeposit(a.amount,l()?a.phoneNumber:null,g.code);if(!s.success)throw new Error(s.error||"Failed to initiate deposit");I(s.data.order_reference),C({deposit_status:s.data.status,amount:s.data.amount_usd,display_amount:s.data?.amount_tzs,phone_number:l()?a.phoneNumber:null,created_at:new Date().toISOString(),original_currency:g.code}),j(`Deposit initiated! ${l()?`Check ${te(a.phoneNumber)} for USSD prompt.`:"Check your payment method for confirmation."}`),O();const d=await y.getWalletBalance();d.success&&B({wallet_balance:d.data.balance,display_balance:d.display_info?.display_balance,display_currency:d.display_info?.currency})}catch(s){console.error("Deposit error:",s),u(s.message||"Failed to process deposit. Please try again.")}finally{i(!1)}},E=async(a,s=!1)=>{try{const d=await y.checkDepositStatus(a,s);if(!d.success)throw new Error(d.error||"Failed to check deposit status");if(console.log(d.data),C({deposit_status:d.data.status,amount:d.data.amount_usd,display_amount:d.data?.amount_tzs,created_at:new Date().toISOString(),original_currency:g.code}),d.data.deposit_status==="successful"){h&&clearInterval(h),j("Deposit successful! Your wallet balance has been updated.");const q=await y.getWalletBalance();q.success&&B({wallet_balance:q.data.balance}),O(),setTimeout(()=>{H(),I(null),C(null),w(null),F(null)},5e3)}else["failed","cancelled","expired"].includes(d.data.deposit_status)&&(h&&clearInterval(h),u(`Deposit ${d.data.deposit_status}.`))}catch(d){console.error("Status check error:",d)}},he=async a=>{r(!0);try{await E(a,!1)}finally{r(!1)}},pe=async a=>{r(!0);try{const s=await y.reconcileDepositStatus(a);s.success?(s.reconciled?j("Payment status updated successfully."):j("Payment status is already up to date."),await E(a,!1)):u(s.error||"Failed to reconcile payment status")}catch(s){u(s.message||"Failed to force reconcile payment")}finally{r(!1)}},ye=async a=>{c(!0);try{const s=await y.cancelPendingDeposit(a);if(!s.success)throw new Error(s.error||"Failed to cancel deposit");j("Deposit cancelled successfully."),h&&clearInterval(h),I(null),C(null),H()}catch(s){u(s.message||"Failed to cancel deposit")}finally{c(!1)}},be=De();return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gradient-to-b dark:from-neutral-900 dark:to-neutral-800 safe-padding",children:e.jsxs("main",{className:"mx-auto max-w-6xl py-4 md:py-8 px-3 sm:px-4 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx(ae,{className:"h-6 w-6 md:h-8 md:w-8 text-primary-500"}),e.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-gray-900 dark:text-gray-900 dark:text-white",children:"Deposit Funds"})]}),e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-300 text-sm font-medium",children:[g.code," - ",g.name]})}),e.jsx("p",{className:"text-sm md:text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto px-4",children:l()?"Add funds to your wallet using mobile money. All transactions are secure and encrypted.":"Add funds to your wallet using secure payment methods. All transactions are encrypted."})]}),e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"hidden lg:block lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-neutral-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-900 dark:text-white",children:"Wallet Balance"}),e.jsx("div",{className:"bg-primary-500/20 p-2 rounded-lg",children:e.jsx("span",{className:"text-primary-600 dark:text-primary-400 text-sm font-medium",children:g.code})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-5xl font-bold text-gray-900 dark:text-gray-900 dark:text-white mb-2",children:m(A?.wallet_balance||0,"USD")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Available for tournaments & withdrawals"})]}),_&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-neutral-700/50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Deposits"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-900 dark:text-white font-medium",children:m(_.total_deposits||0,"USD")})]})}),e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-neutral-700/50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"This Month"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-900 dark:text-white font-medium",children:m(_.this_month_deposits||0,"USD")})]})}),e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-neutral-700/50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Average Deposit"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-900 dark:text-white font-medium",children:m(_.average_deposit||0,"USD")})]})})]})]}),e.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-neutral-700",children:e.jsx("button",{onClick:()=>window.location.href="/transactions",className:"mt-4 w-full text-center text-primary-600 dark:text-primary-500 hover:text-primary-700 dark:hover:text-primary-400 text-sm font-medium py-2",children:"View transactions History →"})})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("div",{className:"lg:hidden bg-white dark:bg-neutral-800 rounded-xl p-4 mb-6 shadow border border-gray-200 dark:border-neutral-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-900 dark:text-white",children:m(A?.wallet_balance||0,"USD")})]}),e.jsx("button",{onClick:()=>window.location.href="/transactions",className:"text-sm text-primary-600 dark:text-primary-500",children:"View History →"})]})}),$&&e.jsx(z,{type:"error",title:"Error",message:$,onClose:()=>u(""),className:"mb-6"}),T&&e.jsx(z,{type:"success",title:"Success",message:T,className:"mb-6"}),D&&N&&e.jsx(Ie,{status:D,orderReference:N,onCancel:ye,onReconcile:he,onForceReconcile:pe,isCancelling:p,isReconciling:b,user:A}),v&&e.jsx(Ee,{validationResult:v,selectedMethod:le,onSelectMethod:ue,onClearValidation:Z}),e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-4 md:p-8 border border-gray-200 dark:border-neutral-700",children:[e.jsxs("form",{onSubmit:ie(ge),className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"block text-base md:text-lg font-medium text-gray-900 dark:text-gray-900 dark:text-white mb-3",children:"How much would you like to deposit?"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 md:pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-base md:text-xl",children:g.symbol})}),e.jsx("input",{type:"number",id:"amount",step:f.step,min:f.minDeposit,max:f.maxDeposit,...W("amount",{valueAsNumber:!0}),className:"block w-full pl-14 md:pl-16 text-lg md:text-xl rounded-lg md:rounded-xl border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-3 md:py-4 px-4 text-gray-900 dark:text-gray-900 dark:text-white placeholder-gray-400 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all",placeholder:f.minDeposit.toString()})]}),P.amount&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:P.amount.message})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-neutral-700/50 p-4 rounded-lg md:rounded-xl",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-900 dark:text-white mb-3",children:"Quick Amounts"}),e.jsx(Ae,{amounts:be,selectedAmount:Q,onSelect:a=>{L("amount",a,{shouldValidate:!0}),me("amount")},currencySymbol:g.symbol}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Min: ",m(f.minDeposit)," | Max: ",m(f.maxDeposit)]})]}),l()&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-base md:text-lg font-medium text-gray-900 dark:text-gray-900 dark:text-white mb-3",children:"Mobile Money Phone Number"}),e.jsxs("div",{className:"flex rounded-lg md:rounded-xl shadow-sm",children:[e.jsx("span",{className:"inline-flex items-center rounded-l-lg md:rounded-l-xl border border-r-0 border-gray-300 dark:border-neutral-600 bg-gray-50 dark:bg-neutral-700 px-3 md:px-4 text-gray-600 dark:text-gray-300 text-base md:text-lg",children:g.code==="TZS"?"+255":g.code==="KES"?"+254":"+"}),e.jsx("input",{type:"tel",id:"phoneNumber",...W("phoneNumber"),onChange:a=>{const s=a.target.value.replace(/[^0-9]/g,"").slice(0,9);L("phoneNumber",s,{shouldValidate:!0}),v&&w(null)},placeholder:"712345678",className:"block w-full rounded-r-lg md:rounded-r-xl border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 py-3 md:py-4 px-4 text-gray-900 dark:text-gray-900 dark:text-white placeholder-gray-400 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all",disabled:!!v})]}),P.phoneNumber&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:P.phoneNumber.message}),e.jsx("p",{className:"mt-2 text-xs md:text-sm text-gray-500 dark:text-gray-400",children:"Enter your phone number without country code (e.g., 712345678)"})]}),e.jsx("div",{className:"space-y-4",children:v?e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx("button",{type:"submit",disabled:t||!ce,className:"flex-1 inline-flex justify-center items-center rounded-lg md:rounded-xl bg-gradient-to-r from-green-500 to-emerald-600 py-4 md:py-5 px-6 text-lg md:text-xl font-semibold text-gray-900 dark:text-white shadow-lg hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-4 focus:ring-green-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:t?e.jsxs("span",{className:"flex items-center space-x-2 md:space-x-3",children:[e.jsx(V,{className:"h-5 w-5 md:h-6 md:w-6 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):`Deposit ${m(Q)}`}),e.jsx("button",{type:"button",onClick:Z,className:"px-4 md:px-6 py-3 md:py-4 border border-gray-300 dark:border-neutral-600 text-gray-700 dark:text-gray-300 rounded-lg md:rounded-xl text-sm md:text-base font-medium hover:bg-gray-50 dark:hover:bg-neutral-700 transition-colors",children:l()?"Change Number":"Change Amount"})]}):e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",onClick:xe,disabled:o||l()&&!Y("phoneNumber"),className:"w-full md:w-auto inline-flex items-center justify-center px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-500 to-primary-600 text-gray-900 dark:text-white rounded-lg md:rounded-xl text-base md:text-lg font-semibold hover:from-primary-600 hover:to-primary-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:o?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 md:h-5 md:w-5 animate-spin mr-2"}),"Validating..."]}):e.jsx(e.Fragment,{children:l()?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"h-4 w-4 md:h-5 md:w-5 mr-2"}),"Validate Phone Number"]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4 md:h-5 md:w-5 mr-2"}),"Continue to Payment"]})})})})})]}),e.jsx("div",{className:"mt-6 md:mt-8 pt-6 md:pt-8 border-t border-gray-200 dark:border-neutral-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs md:text-sm font-medium text-gray-900 dark:text-gray-900 dark:text-white mb-2 md:mb-3",children:[e.jsx(G,{className:"h-4 w-4 md:h-5 md:w-5 inline mr-1 md:mr-2 text-primary-500 dark:text-primary-400"}),"How it works:"]}),e.jsx("ol",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 space-y-1 md:space-y-2 pl-2",children:l()?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"1. Enter amount and phone number"}),e.jsx("li",{children:"2. Validate your phone number"}),e.jsx("li",{children:'3. Click "Deposit" button'}),e.jsx("li",{children:"4. Check phone for USSD prompt"}),e.jsx("li",{children:"5. Enter PIN to confirm payment"})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"1. Enter deposit amount"}),e.jsx("li",{children:"2. Continue to payment gateway"}),e.jsx("li",{children:"3. Complete payment securely"}),e.jsx("li",{children:"4. Funds added instantly"})]})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs md:text-sm font-medium text-gray-900 dark:text-gray-900 dark:text-white mb-2 md:mb-3",children:[e.jsx(S,{className:"h-4 w-4 md:h-5 md:w-5 inline mr-1 md:mr-2 text-yellow-500"}),"Important:"]}),e.jsx("ul",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 space-y-1 md:space-y-2",children:l()?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Transactions complete in 1-2 minutes"}),e.jsx("li",{children:"• Ensure sufficient mobile money balance"}),e.jsx("li",{children:"• USSD sessions expire after 5 minutes"}),e.jsx("li",{children:"• Contact support for any issues"})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Transactions processed instantly"}),e.jsx("li",{children:"• Secure payment processing"}),e.jsx("li",{children:"• No additional fees"}),e.jsx("li",{children:"• Contact support for any issues"})]})})]})]})})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-neutral-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-neutral-700",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 mb-3 md:mb-4",children:[e.jsx(G,{className:"h-5 w-5 md:h-6 md:w-6 text-primary-500"}),e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 dark:text-gray-900 dark:text-white",children:"Need Help?"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-neutral-700/50 rounded-lg",children:[e.jsx("h4",{className:"text-xs md:text-sm font-medium text-gray-900 dark:text-gray-900 dark:text-white mb-1 md:mb-2",children:"Payment Issues"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:'If payment fails, use "Force Update" to check status.'})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-neutral-700/50 rounded-lg",children:[e.jsx("h4",{className:"text-xs md:text-sm font-medium text-gray-900 dark:text-gray-900 dark:text-white mb-1 md:mb-2",children:"Stuck Payments"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:"Payments pending for over 5 minutes will show reconciliation options."})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-neutral-700/50 rounded-lg",children:[e.jsx("h4",{className:"text-xs md:text-sm font-medium text-gray-900 dark:text-gray-900 dark:text-white mb-1 md:mb-2",children:"24/7 Support"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:"Contact support for any issues: support@example.com"})]})]})]})]})]})]})})}export{He as default};
