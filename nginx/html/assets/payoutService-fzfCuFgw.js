import{r as c,aw as n}from"./index-Dd7dhgAO.js";function i({title:r,titleId:e,...a},t){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":e},a),r?c.createElement("title",{id:e},r):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const u=c.forwardRef(i),w={previewMobileMoneyPayout:async(r,e)=>{try{return(await n.post("/payouts/withdraw/mobile-money/preview",{amount:r,phoneNumber:e})).data}catch(a){throw console.error("Failed to preview mobile money payout:",a),a}},createMobileMoneyPayout:async(r,e,a)=>{try{return(await n.post("/payouts/withdraw/mobile-money/create",{amount:r,phoneNumber:e,orderReference:a})).data}catch(t){throw console.error("Failed to create mobile money payout:",t),t}},previewBankPayout:async(r,e,a,t=null)=>{try{const o={amount:r,accountNumber:e,accountName:a};return t&&(o.bankCode=t),(await n.post("/payouts/withdraw/bank/preview",o)).data}catch(o){throw console.error("Failed to preview bank payout:",o),o}},createBankPayout:async(r,e,a,t,o)=>{try{return(await n.post("/payouts/withdraw/bank/create",{amount:r,accountNumber:e,accountName:a,bankCode:t,orderReference:o})).data}catch(s){throw console.error("Failed to create bank payout:",s),s}},getPayoutStatus:async r=>{try{return(await n.get(`/payouts/withdraw/status/${r}`)).data}catch(e){throw console.error("Failed to get payout status:",e),e}},getWithdrawalHistory:async(r={})=>{try{return(await n.get("/payouts/withdraw/history",{params:r})).data}catch(e){throw console.error("Failed to get withdrawal history:",e),e}},getWithdrawalStats:async()=>{try{return(await n.get("/payouts/withdraw/stats")).data}catch(r){throw console.error("Failed to get withdrawal stats:",r),r}},validateWithdrawalAmount:(r,e=!1)=>{const a=n.getCurrentCurrency();if(a==="TZS"){const t=e?1e4:1e3,o=5e6;if(r<t)return{valid:!1,error:`Minimum withdrawal is ${t.toLocaleString()} TZS`};if(r>o)return{valid:!1,error:`Maximum withdrawal is ${o.toLocaleString()} TZS`}}else if(a==="USD"){const t=e?4:.4,o=2e3;if(r<t)return{valid:!1,error:`Minimum withdrawal is $${t.toFixed(2)} USD`};if(r>o)return{valid:!1,error:`Maximum withdrawal is $${o.toFixed(2)} USD`}}return{valid:!0,amount:r,currency:a}},canWithdraw:async r=>{try{const e=await n.get("/payments/wallet/balance");if(!e.data.success)throw new Error("Failed to fetch wallet balance");const a=e.data.data.balance_usd,t=await n.post("/payments/convert-currency",{amount:r,fromCurrency:n.getCurrentCurrency(),toCurrency:"USD"});if(!t.data.success)throw new Error("Currency conversion failed");const o=t.data.data.converted_amount;return a<o?{canWithdraw:!1,reason:"Insufficient wallet balance",walletBalanceUSD:a,requiredAmountUSD:o}:{canWithdraw:!0,walletBalanceUSD:a,requestedAmountUSD:o,requestedAmount:r,currency:n.getCurrentCurrency(),message:"You can proceed with the withdrawal"}}catch(e){return console.error("Withdrawal check error:",e),{canWithdraw:!1,reason:e.message}}},formatTZSCurrency:r=>`${r.toLocaleString("en-US")} TZS`,validateBankAccount:async(r,e,a=null)=>{try{return(await n.post("/payouts/validate-bank-account",{accountNumber:r,accountName:e,bankCode:a})).data}catch(t){throw console.error("Failed to validate bank account:",t),t}},getBanksList:async()=>{try{return(await n.get("/payouts/banks")).data}catch(r){throw console.error("Failed to get banks list:",r),r}}};export{u as F,w as p};
