import{aH as N,r as i,u as w,j as e,l as p,aT as v,B as a}from"./index-Dd7dhgAO.js";import{m as h}from"./matchService-B9tNOTsl.js";function _(){const{id:o}=N(),[t,g]=i.useState(null),[f,y]=i.useState(!0),[c,r]=i.useState(""),[m,l]=i.useState(!1),[x,n]=i.useState(""),{user:d}=w();i.useEffect(()=>{u()},[o]);const u=async()=>{try{const s=await h.getById(o);g(s)}catch(s){console.error("Failed to load match:",s),r(s.response?.data?.message||"Failed to load match details")}finally{y(!1)}},j=async()=>{l(!0),n(""),r("");try{await h.confirmScore(o),n("Score confirmed successfully!"),await u()}catch(s){r(s.response?.data?.message||"Failed to confirm score")}finally{l(!1)}},b=async()=>{l(!0),n(""),r("");try{n("Dispute feature will be implemented soon")}catch(s){r(s.response?.data?.message||"Failed to create dispute")}finally{l(!1)}};return f?e.jsx("div",{className:"min-h-screen bg-neutral-900",children:e.jsx(p,{fullPage:!0,text:"Loading match details..."})}):c&&!t?e.jsxs("div",{className:"min-h-screen bg-neutral-900",children:[e.jsx(v,{}),e.jsx("main",{className:"mx-auto max-w-4xl py-8 px-4 sm:px-6 lg:px-8",children:e.jsx(a,{type:"error",title:"Match Not Found",message:c,action:{text:"Back to Tournaments",to:"/tournaments"}})})]}):e.jsx("div",{className:"min-h-screen bg-neutral-900",children:e.jsxs("main",{className:"mx-auto max-w-4xl py-8 px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:"text-1xl font-bold text-gray-900 dark:text-white mb-6",children:"Match Details"}),c&&e.jsx(a,{type:"error",title:"Action Failed",message:c,onClose:()=>r(""),className:"mb-6"}),x&&e.jsx(a,{type:"success",title:"Success!",message:x,onClose:()=>n(""),className:"mb-6"}),t&&e.jsxs("div",{className:"bg-neutral-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Match #",t.id]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold capitalize
                ${t.status==="scheduled"?"bg-blue-500/20 text-blue-300":t.status==="reported"?"bg-yellow-500/20 text-yellow-300":t.status==="completed"?"bg-green-500/20 text-green-300":t.status==="disputed"?"bg-red-500/20 text-red-300":"bg-gray-500/20 text-gray-300"}`,children:t.status})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 items-center mb-6",children:[e.jsxs("div",{className:"text-center bg-neutral-700/40 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium truncate",children:t.participant1?.user?.username||"TBD"}),e.jsx("p",{className:"text-gray-400 text-sm",children:t.participant1?.gamer_tag||""}),t.participant1_score!==null&&e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:t.participant1_score})]}),e.jsx("div",{className:"text-center text-gray-400 text-2xl font-bold",children:"VS"}),e.jsxs("div",{className:"text-center bg-neutral-700/40 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium truncate",children:t.participant2?.user?.username||"TBD"}),e.jsx("p",{className:"text-gray-400 text-sm",children:t.participant2?.gamer_tag||""}),t.participant2_score!==null&&e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:t.participant2_score})]})]}),t.status==="awaiting_confirmation"&&d&&e.jsx(a,{type:"warning",title:"Action Required",message:t.reported_by_user_id===d.id?"You reported this score. Waiting for opponent confirmation.":"Your opponent reported this score. Please confirm or dispute it.",className:"mb-6"}),t.status==="awaiting_confirmation"&&d&&t.reported_by_user_id!==d.id&&e.jsxs("div",{className:"mt-6 p-4 bg-neutral-700/50 rounded-md",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-4",children:"Confirm or Dispute Score"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:j,disabled:m,className:"flex items-center justify-center bg-green-600 hover:bg-green-700 text-gray-900 dark:text-white font-medium py-2 px-4 rounded w-full sm:w-auto disabled:opacity-50 transition-colors",children:m?e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(p,{size:"sm"}),e.jsx("span",{children:"Confirming..."})]}):"Confirm Score"}),e.jsx("button",{onClick:b,disabled:m,className:"bg-red-600 hover:bg-red-700 text-gray-900 dark:text-white font-medium py-2 px-4 rounded w-full sm:w-auto disabled:opacity-50 transition-colors",children:"Dispute Score"})]})]}),e.jsxs("div",{className:"mt-6 border-t border-neutral-700 pt-4",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-3",children:"Match Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Tournament"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.tournament?.name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Round"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.round_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Scheduled Time"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(t.scheduled_time).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Status"}),e.jsx("p",{className:"text-gray-900 dark:text-white capitalize",children:t.status})]})]})]}),e.jsx(a,{type:"info",title:"Need Help?",message:"If you're experiencing issues with this match, please contact tournament administration for assistance.",className:"mt-6"}),t.status==="disputed"&&e.jsx(a,{type:"error",title:"Match Disputed",message:"This match is currently under dispute. Tournament administration will review and resolve the issue.",className:"mt-6"}),t.status==="completed"&&e.jsx(a,{type:"success",title:"Match Completed",message:"This match has been completed and the results are final.",className:"mt-6"})]})]})})}export{_ as default};
